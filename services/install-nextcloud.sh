#!/bin/bash

function install {
  # create service directory
  mkdir -p /srv/nextcloud

  # create yml(s)
  {
    echo "services:"
    echo "  nextcloud:"
    echo "    image: nextcloud"
    echo "    ports:"
    echo "      - \"8081:80\""
    echo "    volumes:"
    echo "      - \"/srv/nextcloud/data:/var/www/html/data\""
    echo "version: \"2\""
  } > /srv/nextcloud/nextcloud.yml

  # add autorun
  {
    echo "nextcloud_autorun=true"
    echo
    echo "if [ \"\$nextcloud_autorun\" = true ]; then"
    echo "  treehouses services nextcloud up"
    echo "fi"
    echo
    echo
  } > /srv/nextcloud/autorun
}

# environment var
function uses_env {
  echo false
}

# add supported arm(s)
function supported_arms {
  echo "v7l"
}

# add port(s)
function get_ports {
  echo "8081"
}

# add size (in MB)
function get_size {
  echo "900"
}

# add info
function get_info {
  echo "https://github.com/nextcloud"
  echo
  echo "\"A safe home for all your data. Access & share your files, calendars,"
  echo "contacts, mail & more from any device, on your terms.\""
}

# add svg icon
function get_icon {
  cat <<EOF
<svg xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:svg="http://www.w3.org/2000/svg" x="0" y="0" enable-background="new 0 0 196.6 72" version="1.1" viewBox="0 0 133.89203 94.627347" inkscape:export-filename="nextcloud-logo-white-transparent.png" inkscape:export-xdpi="300.09631" inkscape:export-ydpi="300.09631" inkscape:version="0.91 r13725" sodipodi:docname="nextcloud-logo-white-transparent.svg" xml:space="preserve">
  <defs/>
  <metadata>
    <rdf:RDF>
      <cc:Work>
        <dc:format>
          image/svg+xml
        </dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
        <dc:title/>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <sodipodi:namedview bordercolor="#666666" borderopacity="1" fit-margin-bottom="10" fit-margin-left="10" fit-margin-right="10" fit-margin-top="10" gridtolerance="10" guidetolerance="10" objecttolerance="10" pagecolor="#ffffff" showgrid="false" units="px" inkscape:bbox-nodes="true" inkscape:bbox-paths="true" inkscape:current-layer="Layer_1" inkscape:cx="43.021274" inkscape:cy="53.386932" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:snap-bbox="true" inkscape:snap-bbox-edge-midpoints="true" inkscape:snap-bbox-midpoints="true" inkscape:snap-page="true" inkscape:window-height="1359" inkscape:window-maximized="1" inkscape:window-width="2560" inkscape:window-x="0" inkscape:window-y="240" inkscape:zoom="4"/>
  <path style="line-height:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000;text-transform:none;block-progression:tb;white-space:normal;isolation:auto;mix-blend-mode:normal;solid-color:#000;solid-opacity:1" fill="#0082c9" fill-opacity="1" fill-rule="nonzero" stroke="none" stroke-dasharray="none" stroke-dashoffset="0" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-opacity="1" stroke-width="5.56589985" d="M67.032801 9.9999701c-11.80525 0-21.81118 8.0031799-24.91235 18.8465899-2.69524-5.75151-8.53592-9.78093-15.26337-9.78093-9.25183 0-16.85708 7.60525-16.85708 16.85708 0 9.25182 7.60525 16.86054 16.85708 16.86054 6.72745 0 12.56813-4.03188 15.26337-9.78439 3.10117 10.84422 13.1071 18.85006 24.91235 18.85006 11.71795 0 21.67286-7.8851 24.85334-18.60701 2.74505 5.62192 8.513439 9.54134 15.145329 9.54134 9.25183 0 16.86055-7.60872 16.86055-16.86054 0-9.25183-7.60872-16.85708-16.86055-16.85708-6.63189 0-12.400279 3.91696-15.145329 9.53788-3.18048-10.72108-13.13539-18.6035399-24.85334-18.6035399zm0 9.8954999c8.91163 0 16.03073 7.11564 16.03073 16.02724s-7.1191 16.03071-16.03073 16.03071c-8.91158 0-16.02722-7.11911-16.02722-16.03071s7.11564-16.02724 16.02722-16.02724zm-40.17572 9.06567c3.90437 0 6.96504 3.05718 6.96504 6.96157 0 3.90438-3.06067 6.96504-6.96504 6.96504-3.90439 0-6.96158-3.06066-6.96158-6.96504 0-3.90439 3.05719-6.96157 6.96158-6.96157zm80.174389 0c3.9044 0 6.96504 3.05718 6.96504 6.96157 0 3.90438-3.06066 6.96504-6.96504 6.96504-3.90437 0-6.96156-3.06066-6.96156-6.96504 0-3.90439 3.05721-6.96157 6.96156-6.96157z" baseline-shift="baseline" clip-rule="nonzero" color="#000" color-interpolation="sRGB" color-interpolation-filters="linearRGB" color-rendering="auto" direction="ltr" display="inline" enable-background="accumulate" font-family="sans-serif" font-size="medium" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="400" image-rendering="auto" letter-spacing="normal" opacity="1" overflow="visible" shape-rendering="auto" text-anchor="start" text-decoration="none" text-rendering="auto" visibility="visible" word-spacing="normal" writing-mode="lr-tb" inkscape:connector-curvature="0"/>
  <g fill="#0082c9" fill-opacity="1" opacity="1">
    <path d="M39.10845541 73.7614258c2.77527262 0 4.32754375 1.97561779 4.32754375 4.93904449 0 .28223111-.2351926.5174237-.51742371.5174237h-7.47912452c.04703852 2.63415707 1.88154076 4.13938968 3.99827411 4.13938968 1.31707853 0 2.25784891-.56446223 2.7282341-.94077038.28223112-.18815408.51742371-.14111556.65853927.14111555l.14111556.2351926c.14111555.2351926.09407704.47038519-.14111556.65853927-.56446223.42334667-1.78746372 1.12892445-3.43381189 1.12892445-3.05750373 0-5.40942968-2.2108104-5.40942968-5.40942968.04703852-3.38677337 2.30488743-5.40942969 5.12719857-5.40942969zm2.86934966 4.42162078c-.09407704-2.16377188-1.41115557-3.24565781-2.91638818-3.24565781-1.7404252 0-3.24565781 1.12892445-3.57492744 3.2456578h6.49131562z" inkscape:connector-curvature="0"/>
    <path d="M57.56182211 75.2666584v-3.62196596c0-.32926964.18815408-.51742371.51742371-.51742371h.37630815c.32926964 0 .4703852.18815407.4703852.5174237v2.446003h2.11673335c.32926963 0 .5174237.18815407.5174237.5174237v.14111556c0 .32926963-.18815407.47038519-.5174237.47038519h-2.11673336v5.17423709c0 2.39896447 1.4581941 2.68119558 2.25784891 2.7282341.42334668.04703852.56446223.14111556.56446223.51742371v.28223112c0 .32926963-.14111555.47038519-.56446223.47038519-2.2578489 0-3.62196596-1.36411706-3.62196596-3.81012004V75.2666584z" inkscape:connector-curvature="0"/>
    <path d="M68.33364296 73.7614258c1.78746372 0 2.91638818.7526163 3.43381189 1.17596297.2351926.18815407.28223111.42334667.04703852.70557778l-.14111556.2351926c-.18815408.28223111-.42334667.28223111-.70557778.09407703-.4703852-.32926963-1.36411706-.94077038-2.58711855-.94077038-2.25784891 0-4.04531263 1.69338669-4.04531263 4.1864282 0 2.44600298 1.78746372 4.13938967 4.04531263 4.13938967 1.45819409 0 2.44600299-.65853927 2.91638818-1.08188594.28223111-.18815408.47038519-.14111556.65853926.14111556l.14111556.18815407c.14111556.28223112.09407704.4703852-.14111555.70557779-.51742371.42334667-1.78746373 1.31707853-3.66900449 1.31707853-3.05750373 0-5.40942968-2.2108104-5.40942968-5.40942968.04703852-3.1986193 2.39896447-5.4564682 5.4564682-5.4564682z" inkscape:connector-curvature="0"/>
    <path d="M74.58976599 70.42169094c0-.32926963-.18815408-.5174237.14111556-.5174237h.37630815c.32926963 0 .84669334.18815407.84669334.5174237v11.24220604c0 1.31707853.61150075 1.4581941 1.08188594 1.50523261.2351926 0 .42334667.14111556.42334667.4703852v.32926962c0 .32926964-.14111556.51742371-.51742371.51742371-.84669334 0-2.35192595-.28223111-2.35192595-2.54008002V70.42169094z" inkscape:connector-curvature="0"/>
    <path d="M84.23266238 73.7614258c3.01046522 0 5.4564682 2.30488742 5.4564682 5.36239116 0 3.10454225-2.44600298 5.4564682-5.4564682 5.4564682-3.01046521 0-5.4564682-2.35192595-5.4564682-5.4564682 0-3.05750374 2.44600299-5.36239117 5.4564682-5.36239117zm0 9.59585787c2.2108104 0 3.99827412-1.78746372 3.99827412-4.23346671 0-2.35192595-1.78746372-4.09235116-3.99827412-4.09235116-2.21081039 0-4.04531263 1.78746373-4.04531263 4.09235116.04703852 2.39896447 1.83450224 4.2334667 4.04531263 4.2334667z" inkscape:connector-curvature="0"/>
    <path d="M107.70488337 73.7614258c2.4930415 0 3.38677336 2.06969483 3.38677336 2.06969483h.04703852s-.04703852-.32926964-.04703852-.79965483v-4.65681338c0-.32926963-.14111555-.5174237.18815408-.5174237h.37630815c.32926963 0 .84669334.18815407.84669334.5174237v13.40597792c0 .32926963-.14111555.5174237-.47038519.5174237h-.32926963c-.32926963 0-.5174237-.14111555-.5174237-.47038518v-.79965483c0-.37630815.09407703-.65853926.09407703-.65853926h-.04703852s-.89373186 2.16377187-3.57492744 2.16377187c-2.77527263 0-4.51569783-2.2108104-4.51569783-5.40942968-.09407704-3.1986193 1.83450224-5.36239117 4.56273635-5.36239117zm.04703851 9.59585787c1.7404252 0 3.33973485-1.2230015 3.33973485-4.1864282 0-2.11673335-1.08188593-4.13938967-3.29269633-4.13938967-1.83450224 0-3.33973485 1.50523261-3.33973485 4.13938968.04703852 2.54008002 1.36411706 4.18642819 3.29269633 4.18642819z" inkscape:connector-curvature="0"/>
    <path d="M21.85958619 84.34509257h.37630815c.32926964 0 .51742371-.18815408.51742371-.51742371V73.72740048c0-1.59930965 1.7404252-2.74124731 3.716043-2.74124731s3.716043 1.14193766 3.716043 2.7412473v10.10026839c0 .32926963.18815408.5174237.51742371.5174237h.37630815c.32926964 0 .4703852-.18815407.4703852-.5174237v-10.1603201c0-2.68119559-2.68119559-3.99827412-5.12719858-3.99827412-2.35192595 0-5.03312153 1.31707853-5.03312153 3.99827411v10.1603201c0 .32926964.14111556.51742372.47038519.51742372z" inkscape:connector-curvature="0" sodipodi:nodetypes="ssssssssssscccccsss"/>
    <path d="M100.3668744 73.99661839h-.37630815c-.32926963 0-.51742371.18815407-.51742371.5174237v5.6916608c0 1.59930965-1.03484742 3.05750374-3.05750373 3.05750374-1.9756178 0-3.05750374-1.45819409-3.05750374-3.05750374v-5.6916608c0-.32926963-.18815408-.5174237-.5174237-.5174237h-.37630816c-.32926963 0-.4703852.18815407-.4703852.5174237v6.06796896c0 2.68119558 1.9756178 3.99827411 4.4216208 3.99827411 2.44600298 0 4.42162078-1.31707853 4.42162078-3.99827411v-6.06796896c.04703852-.32926963-.14111556-.5174237-.47038519-.5174237z" inkscape:connector-curvature="0"/>
    <path d="M53.80259916 73.91944605c-.11521709.01839206-.22583287.09529487-.33165825.22141172l-1.90359006 2.2692407-1.42493645 1.69779655-2.15715685-2.57149988-1.170451-1.39553737c-.1058249-.1261178-.22566635-.1950772-.35003243-.20579352-.12436655-.01071537-.25331372.03657245-.37943198.1424016l-.2884783.2416237c-.2522356.21165075-.23921204.44599289-.02755987.698228l1.90450873 2.26924118 1.57928158 1.88154076-2.31242112 2.75524409c-.00174042.0020697-.00286935.00437458-.00460977.00643016l-1.16677588 1.39002493c-.21165076.2522356-.18793347.51781507.06431059.72946489l.2884783.24070457c.25223512.21165028.48106481.1585245.69271557-.0937092l1.90359007-2.26924117 1.42493644-1.69779655 2.15715732 2.57150035c.00141115.00169338.00315158.00291639.00460977.00460977l1.16677589 1.39094406c.21164981.25223512.47630969.27505069.72854575.06339146l.28847877-.24162323c.25223512-.21165076.23921156-.4459929.02755987-.69822849l-1.90450873-2.2692407-1.57928159-1.88154076 2.31242112-2.75524456c.00174043-.0020697.00286935-.00437458.00460978-.00643016l1.16677588-1.39002493c.21165076-.25223465.18793394-.51781413-.0643106-.72946441l-.2884783-.2416237c-.12611732-.10582538-.24584023-.1451778-.36105732-.1267834z" inkscape:connector-curvature="0"/>
  </g>
</svg>
EOF
}
